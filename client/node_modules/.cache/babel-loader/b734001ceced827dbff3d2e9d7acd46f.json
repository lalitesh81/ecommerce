{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lalitesh Nohwar\\\\Desktop\\\\MERN_Stack_Project_Ecommerce_Hayroo\\\\client\\\\src\\\\components\\\\shop\\\\productDetails\\\\Action.js\";\nimport React from \"react\";\nimport { postAddReview, postDeleteReview } from \"./FetchApi\";\nimport { isAuthenticate } from \"../auth/fetchApi\";\nexport const Alert = (color, text) => /*#__PURE__*/React.createElement(\"div\", {\n  className: `bg-${color}-200 px-4 py-2 my-2 rounded`,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 6,\n    columnNumber: 3\n  }\n}, text);\nexport const reviewSubmitHanlder = (fData, setFdata, fetchData) => {\n  if (!fData.rating || !fData.review) {\n    setFdata({ ...fData,\n      error: \"Rating and review must be required\"\n    });\n  } else if (!isAuthenticate()) {\n    setFdata({ ...fData,\n      error: \"You must need login to review\"\n    });\n  } else {\n    addReview(fData, setFdata, fetchData);\n  }\n};\nexport const deleteReview = async (reviewId, productId, fetchData, setFdata) => {\n  try {\n    let responseData = await postDeleteReview({\n      rId: reviewId,\n      pId: productId\n    });\n\n    if (responseData.success) {\n      fetchData();\n      setFdata({\n        success: responseData.success\n      });\n    } else if (responseData.error) {\n      fetchData();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\nexport const addReview = async (fData, setFdata, fetchData) => {\n  let formData = {\n    rating: fData.rating,\n    review: fData.review,\n    pId: fData.pId,\n    uId: JSON.parse(localStorage.getItem(\"jwt\")).user._id\n  };\n\n  try {\n    let responseData = await postAddReview(formData);\n\n    if (responseData.success) {\n      setFdata({ ...fData,\n        success: responseData.success,\n        review: \"\",\n        rating: \"\"\n      });\n      fetchData();\n    } else if (responseData.error) {\n      setFdata({ ...fData,\n        error: responseData.error,\n        review: \"\",\n        rating: \"\"\n      });\n      fetchData();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};","map":{"version":3,"names":["React","postAddReview","postDeleteReview","isAuthenticate","Alert","color","text","reviewSubmitHanlder","fData","setFdata","fetchData","rating","review","error","addReview","deleteReview","reviewId","productId","responseData","rId","pId","success","console","log","formData","uId","JSON","parse","localStorage","getItem","user","_id"],"sources":["C:/Users/Lalitesh Nohwar/Desktop/MERN_Stack_Project_Ecommerce_Hayroo/client/src/components/shop/productDetails/Action.js"],"sourcesContent":["import React from \"react\";\r\nimport { postAddReview, postDeleteReview } from \"./FetchApi\";\r\nimport { isAuthenticate } from \"../auth/fetchApi\";\r\n\r\nexport const Alert = (color, text) => (\r\n  <div className={`bg-${color}-200 px-4 py-2 my-2 rounded`}>{text}</div>\r\n);\r\n\r\nexport const reviewSubmitHanlder = (fData, setFdata, fetchData) => {\r\n  if (!fData.rating || !fData.review) {\r\n    setFdata({ ...fData, error: \"Rating and review must be required\" });\r\n  } else if (!isAuthenticate()) {\r\n    setFdata({ ...fData, error: \"You must need login to review\" });\r\n  } else {\r\n    addReview(fData, setFdata, fetchData);\r\n  }\r\n};\r\n\r\nexport const deleteReview = async (\r\n  reviewId,\r\n  productId,\r\n  fetchData,\r\n  setFdata\r\n) => {\r\n  try {\r\n    let responseData = await postDeleteReview({\r\n      rId: reviewId,\r\n      pId: productId,\r\n    });\r\n    if (responseData.success) {\r\n      fetchData();\r\n      setFdata({ success: responseData.success });\r\n    } else if (responseData.error) {\r\n      fetchData();\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const addReview = async (fData, setFdata, fetchData) => {\r\n  let formData = {\r\n    rating: fData.rating,\r\n    review: fData.review,\r\n    pId: fData.pId,\r\n    uId: JSON.parse(localStorage.getItem(\"jwt\")).user._id,\r\n  };\r\n  try {\r\n    let responseData = await postAddReview(formData);\r\n    if (responseData.success) {\r\n      setFdata({\r\n        ...fData,\r\n        success: responseData.success,\r\n        review: \"\",\r\n        rating: \"\",\r\n      });\r\n      fetchData();\r\n    } else if (responseData.error) {\r\n      setFdata({ ...fData, error: responseData.error, review: \"\", rating: \"\" });\r\n      fetchData();\r\n    }\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,EAAwBC,gBAAxB,QAAgD,YAAhD;AACA,SAASC,cAAT,QAA+B,kBAA/B;AAEA,OAAO,MAAMC,KAAK,GAAG,CAACC,KAAD,EAAQC,IAAR,kBACnB;EAAK,SAAS,EAAG,MAAKD,KAAM,6BAA5B;EAAA;EAAA;IAAA;IAAA;IAAA;EAAA;AAAA,GAA2DC,IAA3D,CADK;AAIP,OAAO,MAAMC,mBAAmB,GAAG,CAACC,KAAD,EAAQC,QAAR,EAAkBC,SAAlB,KAAgC;EACjE,IAAI,CAACF,KAAK,CAACG,MAAP,IAAiB,CAACH,KAAK,CAACI,MAA5B,EAAoC;IAClCH,QAAQ,CAAC,EAAE,GAAGD,KAAL;MAAYK,KAAK,EAAE;IAAnB,CAAD,CAAR;EACD,CAFD,MAEO,IAAI,CAACV,cAAc,EAAnB,EAAuB;IAC5BM,QAAQ,CAAC,EAAE,GAAGD,KAAL;MAAYK,KAAK,EAAE;IAAnB,CAAD,CAAR;EACD,CAFM,MAEA;IACLC,SAAS,CAACN,KAAD,EAAQC,QAAR,EAAkBC,SAAlB,CAAT;EACD;AACF,CARM;AAUP,OAAO,MAAMK,YAAY,GAAG,OAC1BC,QAD0B,EAE1BC,SAF0B,EAG1BP,SAH0B,EAI1BD,QAJ0B,KAKvB;EACH,IAAI;IACF,IAAIS,YAAY,GAAG,MAAMhB,gBAAgB,CAAC;MACxCiB,GAAG,EAAEH,QADmC;MAExCI,GAAG,EAAEH;IAFmC,CAAD,CAAzC;;IAIA,IAAIC,YAAY,CAACG,OAAjB,EAA0B;MACxBX,SAAS;MACTD,QAAQ,CAAC;QAAEY,OAAO,EAAEH,YAAY,CAACG;MAAxB,CAAD,CAAR;IACD,CAHD,MAGO,IAAIH,YAAY,CAACL,KAAjB,EAAwB;MAC7BH,SAAS;IACV;EACF,CAXD,CAWE,OAAOG,KAAP,EAAc;IACdS,OAAO,CAACC,GAAR,CAAYV,KAAZ;EACD;AACF,CApBM;AAsBP,OAAO,MAAMC,SAAS,GAAG,OAAON,KAAP,EAAcC,QAAd,EAAwBC,SAAxB,KAAsC;EAC7D,IAAIc,QAAQ,GAAG;IACbb,MAAM,EAAEH,KAAK,CAACG,MADD;IAEbC,MAAM,EAAEJ,KAAK,CAACI,MAFD;IAGbQ,GAAG,EAAEZ,KAAK,CAACY,GAHE;IAIbK,GAAG,EAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAX,EAAwCC,IAAxC,CAA6CC;EAJrC,CAAf;;EAMA,IAAI;IACF,IAAIb,YAAY,GAAG,MAAMjB,aAAa,CAACuB,QAAD,CAAtC;;IACA,IAAIN,YAAY,CAACG,OAAjB,EAA0B;MACxBZ,QAAQ,CAAC,EACP,GAAGD,KADI;QAEPa,OAAO,EAAEH,YAAY,CAACG,OAFf;QAGPT,MAAM,EAAE,EAHD;QAIPD,MAAM,EAAE;MAJD,CAAD,CAAR;MAMAD,SAAS;IACV,CARD,MAQO,IAAIQ,YAAY,CAACL,KAAjB,EAAwB;MAC7BJ,QAAQ,CAAC,EAAE,GAAGD,KAAL;QAAYK,KAAK,EAAEK,YAAY,CAACL,KAAhC;QAAuCD,MAAM,EAAE,EAA/C;QAAmDD,MAAM,EAAE;MAA3D,CAAD,CAAR;MACAD,SAAS;IACV;EACF,CAdD,CAcE,OAAOG,KAAP,EAAc;IACdS,OAAO,CAACC,GAAR,CAAYV,KAAZ;EACD;AACF,CAxBM"},"metadata":{},"sourceType":"module"}